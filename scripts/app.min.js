/**
 * audiowalk
 * @version v0.1.0 - 2014-06-22
 * @link https://github.com/lennart/audiowalk
 * @author Lennart Melzer ()
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";var app=angular.module("lennart.Audiowalk",["ngAnimate","ngRoute","mediaPlayer","ngTouch","ngSanitize","angularSpinner","FBAngular","google-maps","fitVids","angular-loading-bar"]);app.constant("version","v0.1.0").config(["$locationProvider","$routeProvider",function(e,o){o.when("/kaffee-kochen",{templateUrl:"views/kaffee-kochen.html"}).when("/:slide?",{templateUrl:"views/home.html"}).when("/contact",{templateUrl:"views/contact.html"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","$log",function(){}]),app.controller("MainCtrl",["$scope","$location","version","$log","$window","Fullscreen","Places","$routeParams","$rootScope",function(e,o,i,n,t,a,r,l,u){e.$path=o.path.bind(o),e.version=i,a.all(),n.info("Standalone",t.navigator.standalone),e.updateCurrentSlide=function(o){e.currentSlide=r.idToSlideIndex(o),e.slide=r.slides[e.currentSlide],e.$index=e.currentSlide},u.$on("$routeChangeSuccess",function(o,i,t){t&&(n.info("Stopping Audio",e.$index),u.$emit("audio:stop:"+e.$index)),e.updateCurrentSlide(i.params.slide)})}]),app.controller("PlacesCtrl",["$rootScope","$scope","$sce","$routeParams","Places","$log","$window","$element","$location","$timeout","Geolocation","$document",function(e,o,i,n,t){o.nextSlideId=t.indexToSlideId(o.currentSlide+1),o.prevSlideId=t.indexToSlideId(o.currentSlide-1)}]),app.controller("MapCtrl",["$log","$element","$scope","$location","Geolocation",function(e,o,i,n,t){i.map={options:{fit:!0,streetViewControl:!1,maxZoom:40,minZoom:12},currentPosition:{},showKml:!0,currentMarkerOptions:{animation:google.maps.Animation.BOUNCE}},t.current().then(function(o){e.info("current position",o),i.map.currentPosition={longitude:o.coords.longitude,latitude:o.coords.latitude}}).catch(function(o){e.error("Failed to read current Position",o)}),i.kmlUrl=n.protocol()+"://"+n.host()+i.slide.maps.kml,e.info("kmlUrl",i.kmlUrl),i.kmlLayerOptions={url:i.kmlUrl}}]),app.service("Geolocation",["$rootScope","$window","$q",function(e,o,i){var n=this;this.supportGeolocation=!!o.navigator,this.current=function(){var t=i.defer();return n.supportGeolocation?o.navigator.geolocation.getCurrentPosition(function(o){e.$apply(function(){t.resolve(o)},function(e){t.reject(e)})}):t.reject({message:"Device does not support Geolocation"}),t.promise}}]),app.value("StoryBoard",function(){return[{id:"start",title:"BRAVE<br>NEW<br>WORK"},{id:"kaffee-kochen-quote",caption:"Kaffee kochen",scrollDown:!0,video:"PFVcfyqm9_Y",videoStill:"kaffee-kochen.jpg",theme:{},effects:{out:"slideInRight","in":""}},{id:"st-oberholz",caption:"St. Oberholz",audio:"/audio/st.oberholz.mp3",image:"/images/st.oberholz.jpg"},{id:"ausland",caption:"Weg zum Haus aus einem anderen Land",maps:{center:{latitude:52.529781,longitude:13.401393},kml:"/data/ausland.kml",zoom:17},audio:"/audio/02-jura.mp3",autoplay:!0},{id:"brunnenstrasse",caption:"Brunnenstrasse 10",audio:"/audio/haus_aus_einem_anderen_Land.mp3"},{id:"weg-zum-leihamt",caption:"Weg zum Königlichen Leihamt",maps:{center:{latitude:52.5299474,longitude:13.3995975},kml:"/data/leihamt.kml",zoom:16},audio:"/audio/3_bnw_unterwegs_sounds_1_120614.mp3",autoplay:!0},{id:"leihamt",caption:"Königliches Leihamt",audio:"/audio/leihamt.mp3"},{id:"weg-zum-leerstehenden-haus",caption:"Weg zum Leerstehenden Haus",maps:{center:{latitude:52.5288755,longitude:13.4008681},kml:"/data/leerstehendes-haus.kml",zoom:16},audio:"/audio/5_bnw_zwischen_ort_4_u_5_fuge_klavier_130614.mp3",autoplay:!0},{id:"leerstehendes-haus",caption:"Leerstehendes Haus",audio:"/audio/leerstehendes_haus.mp3"},{id:"linienstrasse-206",caption:"Linienstrasse 206",audio:"audio/besetztes_haus.mp3"},{id:"garnisonsfriedhof",caption:"Garnisonsfriedhof",audio:"/audio/garnisonsfriedhof.mp3"},{id:"centraler-arbeitsnachweis",caption:"Centraler Arbeitsnachweis",audio:"/audio/arbeitsnachweis.mp3"},{id:"wunschgarten",caption:"Wunschgarten",audio:"/audio/wunschgarten_flitterzaun.mp3"},{id:"flitterzaun",caption:"Flitterzaun",audio:"/audio/wunschgarten_flitterzaun.mp3"},{id:"volksbuehne",caption:"Volksbühne AM Rosa-Luxemburg-Platz",audio:"/audio/volksbuehne.mp3"},{id:"arbeiterdenkmal",caption:"Arbeiterdenkmal",audio:"/audio/Arbeiterdenkmal.mp3"},{id:"karl-liebknecht-haus",caption:"Karl-Liebknecht-Haus",audio:"/audio/karl-liebknecht-haus.mp3"},{id:"soho-House",caption:"Soho-House",audio:"/audio/soho-house.mp3"},{id:"tips-please",caption:"Spenden",image:"/images/tip-jar.jpg"}]}),app.factory("Places",["StoryBoard","$log",function(e){var o=e();return{idToSlideIndex:function(e){var i=o.filter(function(o){return o.id==e});return i[0]?o.indexOf(i[0]):0},indexToSlideId:function(e){var i;return(i=o[e])?i.id:null},slides:o}}]);